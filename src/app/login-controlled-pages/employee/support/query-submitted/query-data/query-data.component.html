<div class="form-container-div">
  <form *ngIf="showRecordUpdateForm" class="form-container" style="max-width: 80%">
    <div class="form-container-title">
      <span>Record Update Form</span>
    </div>
    <div class="form-container-toggle-button">
      <div *ngIf="!showRecordUpdateEditControlSection" style="margin-right: 1%;margin-bottom: .5rem;"> </div>
      <div *ngIf="showRecordUpdateEditControlSection">
        <label class="tab_container" (change)="setRecordUpdateFormEditStatus(false)">
          <input type="radio" [checked]="!editRecordForm" name="editFormChoice">
          <span class="tab_checkmark left">View</span>
        </label>
        <label class="tab_container" (change)="setRecordUpdateFormEditStatus(true)">
          <input type="radio" [checked]="editRecordForm" name="editFormChoice">
          <span class="tab_checkmark right">Edit</span>
        </label>
      </div>
    </div>
    <table class="form-container-generic-table">
      <tr>
        <td class="td-label"><label>Submit Query Serial Id</label></td>
        <td><label class="data">{{submitQueryRecord.querySerialId}}</label></td>
      </tr>
      <tr>
        <td class="td-label"><label>Query Requested Date</label></td>
        <td><label class="data">{{queryDateDisplayTime}}</label></td>        
      </tr>
      <tr>
        <td class="td-label"><label>Query Status</label></td>
        <td><label class="data">{{queryStatusLookupValue}}</label></td>        
      </tr>
      <tr>
        <td class="td-label"><label>Email Id</label></td>
        <td><label class="data">{{submitQueryRecord.emailId}}</label></td>        
      </tr>
      <tr>
        <td class="td-label"><label>Query Details</label></td>
        <td><div class="form-remakrs">{{submitQueryRecord.queryDetails}}</div></td>
      </tr>
      <tr>
        <td class="td-label"><label>Query Response</label></td>
        <td><div class="form-remakrs">{{submitQueryRecord.queryResponse}}</div></td>        
      </tr>
      <tr>
        <td colspan="2">
          <table class="form-container-generic-table">
            <tr>
              <td class="td-label"><label>Is Registered Tutor</label></td>
              <td><label class="data">{{isRegisteredTutorLookupValue}}</label></td>
              <td class="td-label"><label>Tutor Serial Id</label></td>
              <td><label class="data link_opener" (click)="openTutorRecord()">{{submitQueryRecord.tutorSerialId}}</label></td>
            </tr>
            <tr>
              <td class="td-label"><label>Is Subscribed Customer</label></td>
              <td><label class="data">{{isSubscribedCustomerLookupValue}}</label></td>
              <td class="td-label"><label>Customer Serial Id</label></td>
              <td><label class="data link_opener" (click)="openCustomerRecord()">{{submitQueryRecord.customerSerialId}}</label></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Record Last Updated</label></td>
        <td><label class="data">{{recordLastUpdatedDateDisplayTime}}</label></td>
      </tr>
      <tr>
        <td class="td-label"><label>Updated By</label></td>
        <td><label class="data">{{submitQueryRecord.updatedByName}}</label></td>
      </tr>
      <tr style="background-color: aliceblue;" *ngIf="!showEmployeeActionDetails">
        <td class="td-label">
            <i
                id="employee-actions-details-expander"
                class="fas fa-plus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                (click)="showEmployeeActionDetails = true"></i>
        </td>
        <td>
          Show Action Details
        </td>
      </tr>
      <tr style="background-color: aliceblue;" *ngIf="showEmployeeActionDetails">
        <td class="td-label">
            <i
                id="employee-actions-details-collapser"
                class="fas fa-minus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                (click)="showEmployeeActionDetails = false"></i>
        </td>
        <td>
          Hide Action Details
        </td>
      </tr> 
      <tr style="background-color: aliceblue;" *ngIf="showEmployeeActionDetails">
        <td colspan="2">          
          <table class="form-container-generic-table">
              <tr>
                <td class="td-label"><label>Is Responded</label></td>
                <td><label class="data">{{isContactedLookupValue}}</label></td>              
                <td class="td-label"><label>Who Responded</label></td>
                <td><label class="data">{{submitQueryRecord.whoContactedName}}</label></td>              
                <td class="td-label"><label>Responded Date</label></td>
                <td><label class="data">{{contactedDateDisplayTime}}</label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Put on Hold</label></td>
                <td><label class="data">{{isNotAnsweredLookupValue}}</label></td>              
                <td class="td-label"><label>Who Put on Hold</label></td>
                <td><label class="data">{{submitQueryRecord.whoNotAnsweredName}}</label></td>              
                <td class="td-label"><label></label></td>
                <td><label class="data"></label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Put on Hold Reason</label></td>
                <td colspan="5">
                  <div class="form-remakrs">{{submitQueryRecord.notAnsweredReason}}</div>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        <tr style="background-color: beige;" *ngIf="!showEmployeeActionButtons && !takeActionDisabled">
          <td class="td-label">
              <i
                  id="employee-actions-details-expander"
                  class="fas fa-plus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                  (click)="showEmployeeActionButtons = true"></i>
          </td>
          <td>
            Show Action Buttons
          </td>
        </tr>
        <tr style="background-color: beige;" *ngIf="showEmployeeActionButtons && !takeActionDisabled">
          <td class="td-label">
              <i
                  id="employee-actions-details-collapser"
                  class="fas fa-minus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                  (click)="showEmployeeActionButtons = false"></i>
          </td>
          <td>
            Hide Action Buttons
          </td>
        </tr>  
        <tr style="background-color: beige;" *ngIf="showEmployeeActionButtons && !takeActionDisabled">
          <td></td>
          <td>          
            <table class="form-container-generic-table">
                <tr>
                  <td>
                    <button type="submit"
                            *ngIf="canRespond"
                            class="btnSubmit"
                            (click)="takeActionOnSubmitQueryRecord('Respond to Query', 'Please provide your response for the query.', 'respond', true)">            
                            Respond
                    </button>
                  </td> 
                  <td>
                    <button type="submit"
                            *ngIf="canPutOnHold"
                            class="btnReject"
                            (click)="takeActionOnSubmitQueryRecord('Put query on hold', 'Please provide your explanation for putting query on hold.', 'hold', true)">            
                            Put On Hold
                    </button>
                  </td>
                </tr>
            </table>
          </td>
        </tr>
        <tr>
          <td class="td-label"></td>
          <td></td>
        </tr>
    </table>
    <table class="form-container-generic-table">
      <tr>
        <td align="right">
            <button *ngIf="showRecordUpdateButton" type="submit"
                    class="ok-button form-container-update-button"
                    (click)="updateSubmitQueryRecord()">
              Update Query
            </button>
        </td>
        <td>
          <button *ngIf="showRecordUpdateButton" type="submit"
                  class="cancel-button form-container-update-button"
                  (click)="resetSubmitQueryRecord()">
              Reset Query
          </button>
        </td>
      </tr>
    </table>
    <div class="form-mask" id="submit-query-form-mask-loader" [hidden]="submitQueryFormMaskLoaderHidden">
      <div class="form-loader"></div>
    </div>
  </form>
</div>
