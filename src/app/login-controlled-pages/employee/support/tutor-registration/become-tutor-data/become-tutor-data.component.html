<div class="form-container-div">
  <form class="form-container" style="max-width: 80%">
    <div *ngIf="tutorDataAccess.formDataEditAccess"
          class="form-container-toggle-button">
      <label class="tab_container" (change)="editRecordForm = false;">
        <input type="radio" checked name="editFormChoice">
        <span class="tab_checkmark left">View</span>
      </label>
      <label class="tab_container" (change)="editRecordForm = true;">
        <input type="radio" name="editFormChoice">
        <span class="tab_checkmark right">Edit</span>
      </label>
    </div>
    <table class="form-container-generic-table">
      <tr>
        <td class="td-label"><label>First Name</label></td>
        <td><input class="input_field" type="text" value="{{tutorRecord.property['firstName']}}"
                    [disabled]="!editRecordForm"
                    (change)="updateTutorProperty('firstName', $event.target.value, 'string', $event)">
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Last Name</label></td>
        <td><input class="input_field" type="text" value="{{tutorRecord.property['lastName']}}"
                   [disabled]="!editRecordForm"
                   (change)="updateTutorProperty('lastName', $event.target.value, 'string', $event)">
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Application Date</label></td>        
        <td><label class="data">{{getDateFromMillis(tutorRecord.property['applicationDateMillis'])}}</label></td>
      </tr>
      <tr>
        <td class="td-label"><label>Application Status</label></td>
        <td><label class="data">{{getLookupRendererFromValue(tutorRecord.property['applicationStatus'], applicationStatusFilterOptions)}}</label></td>
      </tr>
      <tr>
        <td class="td-label"><label>Date of Brith</label></td>
        <td><input class="input_field" type="date" value="{{getDateForDateInputParam(tutorRecord.property['dateOfBirth'])}}"
                   [disabled]="!editRecordForm"
                   (change)="updateTutorProperty('dateOfBirth', $event.target.valueAsDate, 'date', $event)"></td>
      </tr>
      <tr>
        <td class="td-label"><label>Contact Number</label></td>
        <td><input class="input_field" type="text" value="{{tutorRecord.property['contactNumber']}}"
                   [disabled]="!editRecordForm"
                   (change)="updateTutorProperty('contactNumber', $event.target.value, 'string', $event)">
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Email Id</label></td>
        <td><input class="input_field" type="email" value="{{tutorRecord.property['emailId']}}"
                   [disabled]="!editRecordForm"
                   (change)="updateTutorProperty('emailId', $event.target.value, 'string', $event)">
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Gender</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Gender'" [data]="genderFilterOptions"
                                   [(ngModel)]="selectedGenderOption" name="genderOption"
                                   [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('gender', $event.value, 'list', $event)"
                                   (onDeSelect)="updateTutorProperty('gender', $event.value, 'list', $event, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Qualification</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Qualification'" [data]="qualificationFilterOptions"
                                   [(ngModel)]="selectedQualificationOption" name="qualificationOption"
                                   [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('qualification', $event.value, 'list', $event)"
                                   (onDeSelect)="updateTutorProperty('qualification', $event.value, 'list', $event, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Primary Profession</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Primary Profession'" [data]="primaryProfessionFilterOptions"
                                   [(ngModel)]="selectedProfessionOption" name="professionOption"
                                   [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('primaryProfession', $event.value, 'list', $event)"
                                   (onDeSelect)="updateTutorProperty('primaryProfession', $event.value, 'list', $event, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Transport Mode</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Transport Mode'" [data]="transportModeFilterOptions"
                                   [(ngModel)]="selectedTransportOption" name="transportOption"
                                   [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('transportMode', $event.value, 'list', $event)"
                                   (onDeSelect)="updateTutorProperty('transportMode', $event.value, 'list', $event, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Teaching Experience</label></td>
        <td><input class="input_field" type="number" value="{{tutorRecord.property['teachingExp']}}"
                   [disabled]="!editRecordForm"
                   (change)="updateTutorProperty('teachingExp', $event.target.value, 'number', $event)"></td>
      </tr>
      <tr>
        <td class="td-label"><label>Student Grades</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Student Grades'" [data]="studentGradesFilterOptions"
                                   [(ngModel)]="selectedStudentGradeOptions" name="studentGradeOptions"
                                   [settings]="multiSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('studentGrades', $event.value, 'multilist', $event)"
                                   (onDeSelect)="updateTutorProperty('studentGrades', $event.value, 'multilist', $event, true)"
                                   (onDeSelectAll)="updateTutorProperty('studentGrades', $event.value, 'multilist', $event, true, true)"
                                   (onSelectAll)="updateTutorProperty('studentGrades', $event.value, 'multilist', $event, false, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Subjects</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Subjects'" [data]="subjectsFilterOptions"
                                   [(ngModel)]="selectedSubjectOptions" name="subjectOptions"
                                   [settings]="multiSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('subjects', $event.value, 'multilist', $event)"
                                   (onDeSelect)="updateTutorProperty('subjects', $event.value, 'multilist', $event, true)"
                                   (onDeSelectAll)="updateTutorProperty('subjects', $event.value, 'multilist', $event, true, true)"
                                   (onSelectAll)="updateTutorProperty('subjects', $event.value, 'multilist', $event, false, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Locations</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Locations'" [data]="locationsFilterOptions"
                                   [(ngModel)]="selectedLocationOptions" name="locationOptions"
                                   [settings]="multiSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('locations', $event.value, 'multilist', $event)"
                                   (onDeSelect)="updateTutorProperty('locations', $event.value, 'multilist', $event, true)"
                                   (onDeSelectAll)="updateTutorProperty('locations', $event.value, 'multilist', $event, true, true)"
                                   (onSelectAll)="updateTutorProperty('locations', $event.value, 'multilist', $event, false, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Preferred Time To Call</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Preferred Time To Call'" [data]="preferredTimeToCallFilterOptions"
                                   [(ngModel)]="selectedCallTimeOptions" name="callTimeOptions"
                                   [settings]="multiSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('preferredTimeToCall', $event.value, 'multilist', $event)"
                                   (onDeSelect)="updateTutorProperty('preferredTimeToCall', $event.value, 'multilist', $event, true)"
                                   (onDeSelectAll)="updateTutorProperty('preferredTimeToCall', $event.value, 'multilist', $event, true, true)"
                                   (onSelectAll)="updateTutorProperty('preferredTimeToCall', $event.value, 'multilist', $event, false, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Additional Details</label></td>
        <td>
            <textarea 
                    class="textarea_field"
                    [disabled]="!editRecordForm" 
                    (change)="updateTutorProperty('additionalDetails', $event.target.value, 'string', $event)"
                    >{{tutorRecord.property['additionalDetails']}}</textarea>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Reference</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Reference'" [data]="referenceFilterOptions"
                                   [(ngModel)]="selectedReferenceOption" name="referenceOption"
                                   [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('reference', $event.value, 'list', $event)"
                                   (onDeSelect)="updateTutorProperty('reference', $event.value, 'list', $event, true)">
                                   
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Preferred Teaching Type</label></td>
        <td>
          <ng-multiselect-dropdown [placeholder]="'Preferred Teaching Type'" [data]="preferredTeachingTypeFilterOptions"
                                   [(ngModel)]="selectedTeachingTypeOptions" name="teachingTypeOptions"
                                   [settings]="multiSelectOptions" [disabled]="!editRecordForm"
                                   (onSelect)="updateTutorProperty('preferredTeachingType', $event.value, 'multilist', $event)"
                                   (onDeSelect)="updateTutorProperty('preferredTeachingType', $event.value, 'multilist', $event, true)"
                                   (onDeSelectAll)="updateTutorProperty('preferredTeachingType', $event.value, 'multilist', $event, true, true)"
                                   (onSelectAll)="updateTutorProperty('preferredTeachingType', $event.value, 'multilist', $event, false, true)">
          </ng-multiselect-dropdown>
        </td>
      </tr>
      <tr>
        <td class="td-label"><label>Record Last Updated</label></td>
        <td><label class="data">{{getDateFromMillis(tutorRecord.property['recordLastUpdatedMillis'])}}</label></td>
      </tr>
      <tr style="background-color: aliceblue;" *ngIf="!showEmployeeActionDetails">
        <td class="td-label">
            <i
                id="employee-actions-details-expander"
                class="fas fa-plus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                (click)="showEmployeeActionDetails = true"></i>
        </td>
        <td>
          Show Action Details
        </td>
      </tr>  
      <tr style="background-color: aliceblue;" *ngIf="showEmployeeActionDetails">
        <td colspan="2">          
          <table>
              <tr>
                <td class="td-label">
                    <i
                        id="employee-actions-details-collapser"
                        class="fas fa-minus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                        (click)="showEmployeeActionDetails = false"></i>
                </td>
                <td colspan="5">
                  Hide Action Details
                </td>
              </tr>
              <tr>
                <td class="td-label"><label>Is Contacted</label></td>
                <td><label class="data">{{getLookupRendererFromValue(tutorRecord.property['isContacted'], yesNoFilterOptions)}}</label></td>              
                <td class="td-label"><label>Who Contacted</label></td>
                <td><label class="data">{{tutorRecord.property['whoContacted']}}</label></td>              
                <td class="td-label"><label>Contacted Date</label></td>
                <td><label class="data">{{getDateFromMillis(tutorRecord.property['contactedDateMillis'])}}</label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Contacted Remarks</label></td>
                <td colspan="5">
                  <div class="form-remakrs">{{tutorRecord.property['contactedRemarks']}}</div>
                </td>
              </tr>
              <tr>
                <td class="td-label"><label>Is Authentication Verified</label></td>
                <td><label class="data">{{getLookupRendererFromValue(tutorRecord.property['isAuthenticationVerified'], yesNoFilterOptions)}}</label></td>
                <td class="td-label"><label>Who Verified</label></td>
                <td><label class="data">{{tutorRecord.property['whoVerified']}}</label></td>              
                <td class="td-label"><label>Verification Date</label></td>
                <td><label class="data">{{getDateFromMillis(tutorRecord.property['verificationDateMillis'])}}</label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Verification Remarks</label></td>
                <td colspan="5">
                  <div class="form-remakrs">{{tutorRecord.property['verificationRemarks']}}</div>
                </td>
              </tr>
              <tr>
                <td class="td-label"><label>Is To Be Recontacted</label></td>
                <td><label class="data">{{getLookupRendererFromValue(tutorRecord.property['isToBeRecontacted'], yesNoFilterOptions)}}</label></td>
                <td class="td-label"><label>Who Suggested For Recontact</label></td>
                <td><label class="data">{{tutorRecord.property['whoSuggestedForRecontact']}}</label></td>              
                <td class="td-label"><label>Suggestion Date</label></td>
                <td><label class="data">{{getDateFromMillis(tutorRecord.property['suggestionDateMillis'])}}</label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Suggestion Remarks</label></td>
                <td colspan="5">
                  <div class="form-remakrs">{{tutorRecord.property['suggestionRemarks']}}</div>
                </td>
              </tr>
              <tr>
                <td class="td-label"><label></label></td>
                <td><label class="data"></label></td>
                <td class="td-label"><label>Who Recontacted</label></td>
                <td><label class="data">{{tutorRecord.property['whoRecontacted']}}</label></td>              
                <td class="td-label"><label>Recontacted Date</label></td>
                <td><label class="data">{{getDateFromMillis(tutorRecord.property['recontactedDateMillis'])}}</label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Recontacted Remarks</label></td>
                <td colspan="5">
                  <div class="form-remakrs">{{tutorRecord.property['recontactedRemarks']}}</div>
                </td>
              </tr>
              <tr>
                <td class="td-label"><label>Is Selected</label></td>
                <td><label class="data">{{getLookupRendererFromValue(tutorRecord.property['isSelected'], yesNoFilterOptions)}}</label></td>
                <td class="td-label"><label>Who Selected</label></td>
                <td><label class="data">{{tutorRecord.property['whoSelected']}}</label></td>              
                <td class="td-label"><label>Selection Date</label></td>
                <td><label class="data">{{getDateFromMillis(tutorRecord.property['selectionDateMillis'])}}</label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Selection Remarks</label></td>
                <td colspan="5">
                  <div class="form-remakrs">{{tutorRecord.property['selectionRemarks']}}</div>
                </td>
              </tr>
              <tr>
                <td class="td-label"><label>Is Rejected</label></td>
                <td><label class="data">{{getLookupRendererFromValue(tutorRecord.property['isRejected'], yesNoFilterOptions)}}</label></td>
                <td class="td-label"><label>Who Rejected</label></td>
                <td><label class="data">{{tutorRecord.property['whoRejected']}}</label></td>              
                <td class="td-label"><label>Rejection Date</label></td>
                <td><label class="data">{{getDateFromMillis(tutorRecord.property['rejectionDateMillis'])}}</label></td>
              </tr>
              <tr>
                <td class="td-label"><label>Rejection Remarks</label></td>
                <td colspan="5">
                  <div class="form-remakrs">{{tutorRecord.property['rejectionRemarks']}}</div>
                </td>
              </tr>
              <tr>
                <td class="td-label"><label>Rejection Count</label></td>
                <td><label class="data">{{tutorRecord.property['rejectionCount']}}</label></td>
                <td class="td-label"><label>Re-Applied</label></td>
                <td><label class="data">{{getLookupRendererFromValue(tutorRecord.property['reApplied'], yesNoFilterOptions)}}</label></td>
                <td class="td-label"><label>Previous Application Date</label></td>
                <td><label class="data">{{getDateFromMillis(tutorRecord.property['previousApplicationDateMillis'])}}</label></td>
              </tr>
          </table>
        </td>
      </tr>     
    </table>
    <button *ngIf="tutorDataAccess.formDataEditAccess && editRecordForm" type="submit"
            class="ok-button form-container-update-button"
            (click)="updateTutorRecord()">            
            Update
    </button>
  </form>
</div>
