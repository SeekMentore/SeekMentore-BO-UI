<div>
  <div class="form-container-div">      
      <form *ngIf="showRecordUpdateForm" class="form-container" style="max-width: 80%">
        <div class="form-container-title">
          <span>Record Update Form</span>
        </div>
        <div class="form-container-toggle-button">
          <div *ngIf="showRecordUpdateEditControlSection">
            <label class="tab_container" (change)="setRecordUpdateFormEditStatus(false)">
              <input type="radio" [checked]="!editRecordForm" name="editFormChoice">
              <span class="tab_checkmark left">View</span>
            </label>
            <label class="tab_container" (change)="setRecordUpdateFormEditStatus(true)">
              <input type="radio" [checked]="editRecordForm" name="editFormChoice">
              <span class="tab_checkmark right">Edit</span>
            </label>
          </div>
        </div>
        <table class="form-container-generic-table">
          <tr>
            <td class="td-label"><label>Package Assignment Serial Id</label></td>
            <td><label class="data">{{packageAssignmentRecord.packageAssignmentSerialId}}</label></td>      
          </tr>
          <tr>
            <td class="td-label"><label>Created Date And Time</label></td>
            <td><label class="data">{{packageAssignmentCreatedDisplayTime}}</label></td>        
          </tr>
          <tr>
            <td class="td-label"><label>Activated Date And Time</label></td>
            <td><label class="data">{{packageAssignmentStartDateDisplayTime}}</label></td>        
          </tr>
          <tr>
            <td class="td-label"><label>Total Hours</label></td>
            <td><input class="input_field" type="number" value="{{packageAssignmentRecord.totalHours}}"
                        [disabled]="!editRecordForm"
                        (change)="updatePackageAssignmentProperty('totalHours', $event, 'number')"></td>
          </tr>
          <tr>
            <td class="td-label"><label>Completed Hours</label></td>
            <td><label class="data">{{packageAssignmentRecord.completedHours}}</label></td>        
          </tr>
          <tr>
            <td class="td-label"><label>Completed Minutes</label></td>
            <td><label class="data">{{packageAssignmentRecord.completedMinutes}}</label></td> 
          </tr>
          <tr>
            <td class="td-label"><label>Terminated Date And Time</label></td>
            <td><label class="data">{{packageAssignmentEndDateDisplayTime}}</label></td>        
          </tr>
          <tr>
            <td class="td-label"><label>Is Customer Grieved</label></td>
            <td>
              <ng-multiselect-dropdown [placeholder]="'Is Customer Grieved'" [data]="yesNoFilterOptions"
                                        [(ngModel)] = "selectedIsCustomerGrievedOptions" name="selectedIsCustomerGrieved"
                                        [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                        (onSelect)="updatePackageAssignmentProperty('isCustomerGrieved', $event, 'list')"
                                        (onDeSelect)="updatePackageAssignmentProperty('isCustomerGrieved', $event, 'list', true)">
              </ng-multiselect-dropdown>
            </td>      
          </tr>
          <tr>
            <td class="td-label"><label>Customer Happiness Index</label></td>
            <td>
              <ng-multiselect-dropdown [placeholder]="'Customer Happiness Index'" [data]="happinessIndexFilterOptions"
                                        [(ngModel)] = "selectedCustomerHappinessIndexOptions" name="selectedCustomerHappinessIndex"
                                        [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                        (onSelect)="updatePackageAssignmentProperty('customerHappinessIndex', $event, 'list')"
                                        (onDeSelect)="updatePackageAssignmentProperty('customerHappinessIndex', $event, 'list', true)">
              </ng-multiselect-dropdown>
            </td>      
          </tr>
          <tr>
            <td class="td-label"><label>Customer Remarks</label></td>
            <td>
                <textarea 
                        class="textarea_field"
                        id="customerRemarks"
                        [disabled]="!editRecordForm" 
                        (change)="updatePackageAssignmentProperty('customerRemarks', $event, 'string')"
                        >{{packageAssignmentRecord.customerRemarks}}</textarea>
            </td>
          </tr> 
          <tr>
            <td class="td-label"><label>Is Tutor Grieved</label></td>
            <td>
              <ng-multiselect-dropdown [placeholder]="'Is Tutor Grieved'" [data]="yesNoFilterOptions"
                                        [(ngModel)] = "selectedIsTutorGrievedOptions" name="selectedIsTutorGrieved"
                                        [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                        (onSelect)="updatePackageAssignmentProperty('isTutorGrieved', $event, 'list')"
                                        (onDeSelect)="updatePackageAssignmentProperty('isTutorGrieved', $event, 'list', true)">
              </ng-multiselect-dropdown>
            </td>      
          </tr>
          <tr>
            <td class="td-label"><label>Tutor Happiness Index</label></td>
            <td>
              <ng-multiselect-dropdown [placeholder]="'Tutor Happiness Index'" [data]="happinessIndexFilterOptions"
                                        [(ngModel)] = "selectedTutorHappinessIndexOptions" name="selectedTutorHappinessIndex"
                                        [settings]="singleSelectOptions" [disabled]="!editRecordForm"
                                        (onSelect)="updatePackageAssignmentProperty('tutorHappinessIndex', $event, 'list')"
                                        (onDeSelect)="updatePackageAssignmentProperty('tutorHappinessIndex', $event, 'list', true)">
              </ng-multiselect-dropdown>
            </td>      
          </tr>
          <tr>
            <td class="td-label"><label>Tutor Remarks</label></td>
            <td>
                <textarea 
                        class="textarea_field"
                        id="tutorRemarks"
                        [disabled]="!editRecordForm" 
                        (change)="updatePackageAssignmentProperty('tutorRemarks', $event, 'string')"
                        >{{packageAssignmentRecord.tutorRemarks}}</textarea>
            </td>
          </tr>
          <tr>
            <td class="td-label"><label>Admin Remarks</label></td>
            <td>
                <textarea 
                        class="textarea_field"
                        id="adminRemarks"
                        [disabled]="!editRecordForm" 
                        (change)="updatePackageAssignmentProperty('adminRemarks', $event, 'string')"
                        >{{packageAssignmentRecord.adminRemarks}}</textarea>
            </td>
          </tr>
          <tr>
            <td class="td-label"><label>Action Date</label></td>
            <td><label class="data">{{packageAssignmentActionDateDisplayTime}}</label></td>        
          </tr>
          <tr>
            <td class="td-label"><label>Who Acted</label></td>
            <td><label class="data">{{packageAssignmentRecord.whoActedName}}</label></td>        
          </tr>
          <tr>
            <td class="td-label"><label>Record Last Updated</label></td>
            <td><label class="data">{{packageAssignmentRecordLastUpdatedDateDisplayTime}}</label></td>        
          </tr>
          <tr>
            <td class="td-label"><label>Updated By</label></td>
            <td><label class="data">{{packageAssignmentRecord.updatedByName}}</label></td>        
          </tr>
          <tr style="background-color: beige;" *ngIf="!showEmployeeActionButtons && !takeActionDisabled">
            <td class="td-label">
                <i
                    id="employee-actions-details-expander"
                    class="fas fa-plus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                    (click)="showEmployeeActionButtons = true"></i>
            </td>
            <td>
              Show Action Buttons
            </td>
          </tr>
          <tr style="background-color: beige;" *ngIf="showEmployeeActionButtons && !takeActionDisabled">
            <td class="td-label">
                <i
                    id="employee-actions-details-collapser"
                    class="fas fa-minus" style="cursor: pointer; border: 1px solid black; border-radius: 4px;"
                    (click)="showEmployeeActionButtons = false"></i>
            </td>
            <td>
              Hide Action Buttons
            </td>
          </tr>
          <tr style="background-color: beige;" *ngIf="showEmployeeActionButtons && !takeActionDisabled">
            <td></td>
            <td>          
              <table width="100%">
                  <tr>
                    <td>
                      <button type="submit"
                              class="btnSubmit"
                              *ngIf="canStartAssignment"
                              (click)="takeActionOnPackageAssignment('Enter comments for action', 'Please provide your comments for starting the assignment.', 'startAssignment', true)">            
                              Start Assignment
                      </button>
                    </td>
                    <td>
                      <button type="submit"
                              class="btnReset"
                              *ngIf="canReviewCompleteAssignment"
                              (click)="takeActionOnPackageAssignment('Enter comments for action', 'Please provide your comments for review completing the assignment.', 'endAssignment', true)">            
                              Review Complete Assignment
                      </button>
                    </td>
                  </tr>
              </table>
            </td>
          </tr>
        </table>
        <table class="form-container-generic-table">
          <tr>
            <td align="right">
                <button *ngIf="showRecordUpdateButton" type="submit"
                        class="ok-button form-container-update-button"
                        (click)="updatePackageAssignmentRecord()">
                  Update Package Assignment
                </button>
            </td>
            <td>
              <button *ngIf="showRecordUpdateButton" type="submit"
                      class="cancel-button form-container-update-button"
                      (click)="resetPackageAssignmentRecord()">
                Reset Package Assignment
              </button>
            </td>
          </tr>
        </table>
        <div class="form-mask" id="package-assignment-form-mask-loader" [hidden]="packageAssignmentFormMaskLoaderHidden">
          <div class="form-loader"></div>
        </div>
      </form>
    </div>
</div>